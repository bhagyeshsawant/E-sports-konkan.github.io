<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ProArena</title>

<style>
body {
      background: black;
        color: white;
          font-family: sans-serif;
            text-align: center;
              margin: 0;
                padding: 40px;
}

button {
      padding: 10px 15px;
        margin: 10px;
          border: none;
            background: #ff003c;
              color: white;
                font-weight: bold;
                  border-radius: 5px;
                    cursor: pointer;
}

button:hover {
      background: #ff335f;
}
</style>
</head>

<body>

<h1>ProArena Esports</h1>

<button onclick="login()" id="loginBtn">Login with Google</button>
<button onclick="logout()" id="logoutBtn" style="display:none;">Logout</button>
<button onclick="createTournament()" id="adminBtn" style="display:none;">Create Test Tournament</button>

<div id="status"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
      getAuth,
        GoogleAuthProvider,
          signInWithPopup,
            signOut,
              onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import {
      getFirestore,
        collection,
          addDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
      apiKey: "AIzaSyCjxCgZWsqnIEMaCSCu7ZJykpAFGnX0kFY",
        authDomain: "esports-konkan.firebaseapp.com",
          projectId: "esports-konkan",
            storageBucket: "esports-konkan.firebasestorage.app",
              messagingSenderId: "924344762740",
                appId: "1:924344762740:web:11f8d5b158ee0dad096c21",
                  measurementId: "G-33LMR2QPYC"
};

const ADMIN_EMAIL = "sawantbhagyesh98@gmail.com";

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const provider = new GoogleAuthProvider();

window.login = () => signInWithPopup(auth, provider);
window.logout = () => signOut(auth);

window.createTournament = async () => {
      await addDoc(collection(db, "tournaments"), {
            name: "Test Tournament",
                game: "BGMI",
                    time: new Date().toISOString()
      });
        alert("Tournament created");
};

onAuthStateChanged(auth, user => {
      const loginBtn = document.getElementById("loginBtn");
        const logoutBtn = document.getElementById("logoutBtn");
          const adminBtn = document.getElementById("adminBtn");
            const status = document.getElementById("status");

              if (user) {
                    loginBtn.style.display = "none";
                        logoutBtn.style.display = "inline-block";
                            status.innerText = "Logged in as: " + user.email;

                                if (user.email === ADMIN_EMAIL) {
                                          adminBtn.style.display = "inline-block";
                                }
              } else {
                    loginBtn.style.display = "inline-block";
                        logoutBtn.style.display = "none";
                            adminBtn.style.display = "none";
                                status.innerText = "Not logged in";
              }
});
</script>

</body>
</html>
